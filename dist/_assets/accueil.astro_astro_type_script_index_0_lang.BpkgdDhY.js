let e,t="pop",n=null;function o(e){t=e}function i(n=t){try{const t=function(){const t=window.AudioContext||window.webkitAudioContext;return e&&"closed"!==e.state||(e=new t),"suspended"===e.state&&e.resume(),e}(),o=t.currentTime;if("pop"===n){const e=.25,n=t.createOscillator(),a=t.createGain();return n.type="sine",n.frequency.setValueAtTime(880,o),n.frequency.exponentialRampToValueAtTime(1320,o+.12),n.frequency.exponentialRampToValueAtTime(660,o+e),a.gain.setValueAtTime(1e-4,o),a.gain.linearRampToValueAtTime(.18,o+.02),a.gain.exponentialRampToValueAtTime(1e-4,o+e),n.connect(a),a.connect(t.destination),n.start(o),void n.stop(o+e)}if("blip"===n){const e=.18,n=t.createOscillator(),a=t.createGain();return n.type="triangle",n.frequency.setValueAtTime(1500,o),n.frequency.exponentialRampToValueAtTime(600,o+e),a.gain.setValueAtTime(1e-4,o),a.gain.linearRampToValueAtTime(.2,o+.02),a.gain.exponentialRampToValueAtTime(1e-4,o+e),n.connect(a),a.connect(t.destination),n.start(o),void n.stop(o+e)}if("shimmer"===n){const e=.3,n=t.createOscillator(),a=t.createOscillator(),i=t.createGain();return n.type="sine",a.type="sine",n.frequency.setValueAtTime(880,o),a.frequency.setValueAtTime(1760,o),a.detune.setValueAtTime(10,o),i.gain.setValueAtTime(1e-4,o),i.gain.linearRampToValueAtTime(.16,o+.03),i.gain.exponentialRampToValueAtTime(1e-4,o+e),n.connect(i),a.connect(i),i.connect(t.destination),n.start(o),a.start(o+.02),n.stop(o+e),void a.stop(o+e)}if("whoosh"===n){const e=.25,n=t.sampleRate,a=Math.floor(n*e),i=t.createBuffer(1,a,n),s=i.getChannelData(0);for(let e=0;e<a;e++)s[e]=(2*Math.random()-1)*(1-e/a);const c=t.createBufferSource();c.buffer=i;const l=t.createBiquadFilter();l.type="bandpass",l.Q.value=1;const r=t.createGain();return l.frequency.setValueAtTime(500,o),l.frequency.exponentialRampToValueAtTime(4e3,o+e),r.gain.setValueAtTime(1e-4,o),r.gain.linearRampToValueAtTime(.14,o+.03),r.gain.exponentialRampToValueAtTime(1e-4,o+e),c.connect(l),l.connect(r),r.connect(t.destination),c.start(o),void c.stop(o+e)}i("pop")}catch(e){}}function a(){i(),document.getElementById("modalOverlay").classList.add("active"),document.body.style.overflow="hidden"}function s(){document.getElementById("modalOverlay").classList.remove("active"),document.body.style.overflow="auto";const e=document.getElementById("accessForm");e&&e.reset(),n=null,["step1","step2","step3","successStep"].forEach((e=>{const t=document.getElementById(e);t&&t.classList.add("hidden")}));const t=document.getElementById("step1"),o=document.getElementById("successStep");t&&t.classList.remove("hidden"),o&&o.classList.add("hidden"),["progress1","progress2","progress3"].forEach((e=>{const t=document.getElementById(e);t&&t.classList.remove("active")}));const a=document.getElementById("progress1");a&&a.classList.add("active"),document.querySelectorAll(".avatar-option").forEach((e=>{e.classList.remove("selected")}));const i=document.getElementById("avatarNextBtn");i&&(i.disabled=!0)}function c(e){n=e,document.querySelectorAll(".avatar-option").forEach((e=>{e.classList.remove("selected")}));const t=document.getElementById(`avatar-${e}`);t&&t.classList.add("selected");const o=document.getElementById("avatarNextBtn");o&&(o.disabled=!1)}function l(){const e=document.querySelector(".form-step.active");if(!e)return;const t=e.id;"step1"===t?async function(){const e=document.getElementById("firstName")?.value.trim(),t=document.getElementById("email")?.value.trim();if(e&&t)if(/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)){localStorage.setItem("userFirstName",e);try{const n=await fetch("/.netlify/functions/subscribe",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e,email:t,step:"1"})});await n.json(),n.ok,r("step1","step2","progress2")}catch(e){r("step1","step2","progress2")}}else alert("Veuillez entrer un email valide");else alert("Veuillez remplir tous les champs")}():"step2"===t&&async function(){if(n)try{const e=d(),t=await fetch("/.netlify/functions/subscribe",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e.email,avatar:n,step:"2"})});await t.json(),t.ok,r("step2","step3","progress3"),setTimeout((function(){u()}),100)}catch(e){r("step2","step3","progress3"),setTimeout((function(){u()}),100)}else alert("Veuillez sélectionner un profil")}()}function r(e,t,n){const o=document.getElementById(e),a=document.getElementById(t),i=document.getElementById(n);o&&(o.classList.add("hidden"),o.classList.remove("active")),a&&(a.classList.remove("hidden"),a.classList.add("active")),i&&i.classList.add("active")}function d(){return{firstName:document.getElementById("firstName")?.value||"",email:document.getElementById("email")?.value||"",avatar:n||""}}function u(){const e=document.getElementById("phone");e&&void 0!==window.intlTelInput&&(window.iti=window.intlTelInput(e,{initialCountry:"auto",geoIpLookup:function(e){fetch("https://ipapi.co/json/").then((e=>e.json())).then((t=>e(t.country_code))).catch((()=>e("fr")))},preferredCountries:["fr","ch","be","ca"],separateDialCode:!0,utilsScript:"https://cdn.jsdelivr.net/npm/intl-tel-input@18.2.1/build/js/utils.js"}))}async function m(e){e.preventDefault();const t=document.getElementById("btnText"),n=document.getElementById("loader"),o=document.getElementById("submitBtn"),a=document.getElementById("phone");if(!a||!a.value.trim())return void alert("Veuillez entrer votre numéro de téléphone");if(window.iti&&!window.iti.isValidNumber())return void alert("Veuillez entrer un numéro de téléphone valide");t&&(t.style.display="none"),n&&n.classList.remove("hidden"),o&&(o.disabled=!0);let i="";i=window.iti?window.iti.getNumber():a.value.trim();try{const e=await fetch("/.netlify/functions/subscribe",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:d().email,phone:i,step:"3"})});await e.json(),e.ok,p()}catch(e){p()}}function p(){const e=document.getElementById("step3"),t=document.getElementById("successStep");e&&e.classList.add("hidden"),t&&t.classList.remove("hidden"),setTimeout((()=>{window.location.href="/100k-masterclass"}),2500)}document.addEventListener("DOMContentLoaded",(function(){const e=document.getElementById("modalOverlay");e&&e.addEventListener("click",(function(e){e.target===this&&s()}))})),window.addEventListener("scroll",(()=>{const e=window.pageYOffset,t=document.querySelector(".gradient-bg");t&&(t.style.transform=`translateY(${.5*e}px)`)}));const f=new IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting&&(e.target.querySelectorAll(".stat-number").forEach((e=>{"+100k€"===e.textContent&&function(e){const t=Date.now(),n=()=>{const o=Date.now(),a=Math.min((o-t)/2e3,1),i=Math.floor(100*a+0);e.textContent.includes("€")?e.textContent=i.toLocaleString("fr-FR")+"k€":e.textContent=i,a<1&&window.requestAnimationFrame(n)};window.requestAnimationFrame(n)}(e)})),f.unobserve(e.target))}))}));document.addEventListener("DOMContentLoaded",(function(){document.querySelectorAll(".stats").forEach((e=>{f.observe(e)})),window.openModal=a,window.closeModal=s,window.nextStep=l,window.selectAvatar=c,window.handleSubmit=m,window.setOpenSoundStyle=o})),"undefined"!=typeof module&&module.exports&&(module.exports={openModal:a,closeModal:s,nextStep:l,selectAvatar:c,handleSubmit:m,setOpenSoundStyle:o});