const e=[{time:5,author:"Marie",message:"Super excitÃ© !",badge:null},{time:30,author:"Thomas",message:"Wow ðŸ¤¯",badge:null},{time:60,author:"Sophie",message:"Trop bien",badge:null},{time:90,type:"reaction",emoji:"ðŸ”¥"},{time:120,author:"Lucas",message:"Merci !",badge:null},{time:180,author:"Emma",message:"Top ðŸ’Ž",badge:null},{time:240,type:"reaction",emoji:"ðŸ’°"},{time:300,author:"Alex",message:"GÃ©nial",badge:null},{time:420,author:"Julie",message:"Incroyable",badge:null},{time:540,type:"reaction",emoji:"ðŸš€"},{time:600,author:"Marc",message:"J'adore",badge:null}],t=document.getElementById("chatMessages"),n=localStorage.getItem("userFirstName")||"Vous";window.addEventListener("DOMContentLoaded",(()=>{const t=document.getElementById("welcomeMessage");t&&(t.textContent="Vous"!==n?`Bienvenue ${n} ! La session a commencÃ©`:"La session a commencÃ©"),e.forEach((e=>{"reaction"!==e.type&&"system"!==e.type&&setTimeout((()=>{o(e.author||"",e.message||"",e.badge||null)}),2e3*Math.random())})),function(){let e=5;const t=document.getElementById("timerCountdown"),n=document.getElementById("timerButton"),a=document.getElementById("timerLabel");if(!t||!n||!a)return;const o=()=>{const o=Math.floor(e/60),r=e%60;t.textContent=`${o.toString().padStart(2,"0")}:${r.toString().padStart(2,"0")}`,e<=0?(t.textContent="DÃ‰BLOQUÃ‰",clearInterval(s),n.classList.remove("disabled"),n.removeAttribute("disabled"),a.textContent="OFFRE DISPONIBLE",n.addEventListener("click",(()=>{window.location.href="/offre-speciale"}))):e--};o();const s=setInterval(o,1e3)}(),function(){const e=document.querySelectorAll(".chapter"),t=72e4,n=Date.now(),a=[0,102.86,205.71,308.57,411.43,514.29,617.14];requestAnimationFrame((function o(){const s=Date.now()-n,r=s/1e3;a.forEach(((t,n)=>{const o=a[n+1]||720;if(r>=t&&r<o){e[n]?.classList.add("active"),e[n]?.classList.remove("completed");const a=o-t,s=r-t,c=Math.min(s/a*100,100),i=e[n];i&&i.style.setProperty("--chapter-progress",`${c}%`)}else if(r>=o){e[n]?.classList.remove("active"),e[n]?.classList.add("completed");const t=e[n];t&&t.style.setProperty("--chapter-progress","0%")}else{e[n]?.classList.remove("active","completed");const t=e[n];t&&t.style.setProperty("--chapter-progress","0%")}})),s<t&&requestAnimationFrame(o)}))}(),function(){const e=document.getElementById("viewerCount");if(!e)return;let t=Math.floor(26*Math.random())+32;function n(){if(!e)return;const t=Math.floor(26*Math.random())+32;e.classList.add("updating"),setTimeout((()=>{e&&(e.textContent=t.toString(),e.classList.remove("updating"))}),250)}e.textContent=t.toString(),function e(){const t=Math.floor(10001*Math.random())+1e4;setTimeout((()=>{n(),e()}),t)}()}()}));const a=["#00dc82","#00f593","#10b981","#34d399","#6ee7b7","#14b8a6","#2dd4bf","#5eead4","#22c55e","#4ade80","#86efac","#06b6d4","#22d3ee","#67e8f9","#0891b2","#84cc16","#a3e635","#bef264","#00b86b","#10b981"];function o(e,o,s=null){if(!t)return;const r=document.createElement("div");r.className="chat-message";const c=function(e){if("Animateur"===e)return"var(--accent-bright)";if("Vous"===e||e===n)return"var(--accent)";let t=0;for(let n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n)&4294967295;const o=Math.abs(t)%a.length;return a[o]}(e);r.innerHTML=`\n\t\t\t<div class="message-header">\n\t\t\t\t<div class="message-author" style="color: ${c};">\n\t\t\t\t\t${e}\n\t\t\t\t\t${s?`<span class="message-badge">${s}</span>`:""}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="message-content">${o}</div>\n\t\t`,t.appendChild(r),t.scrollTop=t.scrollHeight}document.getElementById("publicTab"),document.getElementById("publicContent");const s=document.getElementById("chatForm");s&&s.addEventListener("submit",(e=>{e.preventDefault();const t=document.getElementById("chatInput");if(!t)return;const a=t.value.trim();a&&(o(n,a,null),t.value="",setTimeout((()=>{const e=["Top!","+1","ðŸ”¥","Merci","Cool"],t=e[Math.floor(Math.random()*e.length)];o(["Julie","Marc","Sophie","Alex"][Math.floor(4*Math.random())],t)}),2e3+3e3*Math.random()))})),document.querySelectorAll(".chapter").forEach((e=>{e.addEventListener("click",(()=>{parseInt(e.dataset.time||"0"),document.querySelectorAll(".chapter").forEach((e=>e.classList.remove("active"))),e.classList.add("active")}))}));