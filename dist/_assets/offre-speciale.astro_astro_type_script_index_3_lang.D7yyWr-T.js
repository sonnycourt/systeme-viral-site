const e=new Date("2025-11-03T21:00:00").getTime(),t=new Date("2025-11-20T21:00:00").getTime(),n=new Date("2025-12-04T22:00:00").getTime(),s=new Date("2025-12-04T22:00:00").getTime();let o=198,i=200;const a=()=>{const s=(new Date).getTime();if(s<e)return{phase:0,places:198};if(s<t){const n=(s-e)/36e5/((t-e)/36e5),i=Math.pow(n,.7);let a=Math.floor(198*(1-i));return a>o&&(a=o),o=a,{phase:1,places:a}}if(s<n){const e=(s-t)/36e5/((n-t)/36e5),o=Math.pow(e,.76);let a=Math.floor(200*(1-o));return a>i&&(a=i),i=a,{phase:2,places:a}}return{phase:"ended",places:0}},r=e=>{const t=document.getElementById("scarcityText"),n=document.getElementById("places"),s=document.getElementById("exceptionalOffer"),o=document.getElementById("exceptionalPlaces"),i=document.getElementById("urgentWarning"),a=document.getElementById("scarcityTextBottom"),r=document.getElementById("placesBottom"),c=document.getElementById("exceptionalOfferBottom"),l=document.getElementById("exceptionalPlacesBottom"),d=document.getElementById("urgentWarningBottom");if(t&&n&&s&&o&&i&&a&&r&&c&&l&&d)if(0===e.phase)t.classList.remove("sold-out"),t.innerHTML=`<span class="places-count" id="places">${e.places}</span> places disponibles sur 200`,s.style.display="none",i.style.display="none",a.classList.remove("sold-out"),a.innerHTML=`<span class="places-count" id="placesBottom">${e.places}</span> places disponibles sur 200`,c.style.display="none",d.style.display="none";else if(1===e.phase){if(t.classList.remove("sold-out"),t.innerHTML=`<span class="places-count" id="places">${e.places}</span> places disponibles sur 200`,s.style.display="none",a.classList.remove("sold-out"),a.innerHTML=`<span class="places-count" id="placesBottom">${e.places}</span> places disponibles sur 200`,c.style.display="none",e.places<=10?(i.style.display="block",d.style.display="block"):(i.style.display="none",d.style.display="none"),e.places<=3){const e=document.getElementById("places"),t=document.getElementById("placesBottom");e&&(e.style.fontSize="1.75rem",e.style.animation="urgentPulse 0.8s infinite",e.classList.add("urgent-red")),t&&(t.style.fontSize="1.75rem",t.style.animation="urgentPulse 0.8s infinite",t.classList.add("urgent-red"))}}else 2===e.phase?(t.classList.add("sold-out"),t.innerHTML='<span class="urgent-red">0</span> places disponibles sur 200',s.style.display="inline-block",o.textContent=String(e.places),i.style.display="block",a.classList.add("sold-out"),a.innerHTML='<span class="urgent-red">0</span> places disponibles sur 200',c.style.display="inline-block",l.textContent=String(e.places),d.style.display="block",e.places<30?(o.style.animation="urgentFlash 0.5s infinite",l.style.animation="urgentFlash 0.5s infinite"):(o.style.animation="",l.style.animation="")):3===e.phase?(t.classList.add("sold-out"),t.innerHTML='<span class="urgent-red">0</span> places disponibles sur 200',s.style.display="inline-block",o.textContent=String(e.places),o.style.animation="urgentFlash 0.3s infinite",i.style.display="block",a.classList.add("sold-out"),a.innerHTML='<span class="urgent-red">0</span> places disponibles sur 200',c.style.display="inline-block",l.textContent=String(e.places),l.style.animation="urgentFlash 0.3s infinite",d.style.display="block"):(t.classList.add("sold-out"),t.textContent="L'offre est compl√®tement termin√©e",s.style.display="none",i.style.display="none",a.classList.add("sold-out"),a.textContent="L'offre est compl√®tement termin√©e",c.style.display="none",d.style.display="none")},c=()=>{const e=(new Date).getTime(),t=s-e;if(t<0)return void(document.querySelector(".countdown-banner").innerHTML='\n                    <div class="doors-closed-container">\n                        <div class="doors-closed-icon">üîí</div>\n                        <h2 class="doors-closed-title">PORTES FERM√âES</h2>\n                        <p class="doors-closed-subtitle">L\'offre -50% est maintenant termin√©e</p>\n                        <div class="doors-closed-message">\n                            <p>Merci √† tous ceux qui ont rejoint le Syst√®me Viral 100K‚Ñ¢ !</p>\n                            <p>Les portes se sont ferm√©es le <strong>4 d√©cembre 2025 √† 22h00</strong>.</p>\n                        </div>\n                    </div>\n                ');const n=Math.floor(t/864e5),o=Math.floor(t%864e5/36e5),i=Math.floor(t%36e5/6e4),c=Math.floor(t%6e4/1e3);document.getElementById("days").textContent=n.toString().padStart(2,"0"),document.getElementById("hours").textContent=o.toString().padStart(2,"0"),document.getElementById("minutes").textContent=i.toString().padStart(2,"0"),document.getElementById("seconds").textContent=c.toString().padStart(2,"0"),document.getElementById("daysBottom").textContent=n.toString().padStart(2,"0"),document.getElementById("hoursBottom").textContent=o.toString().padStart(2,"0"),document.getElementById("minutesBottom").textContent=i.toString().padStart(2,"0"),document.getElementById("secondsBottom").textContent=c.toString().padStart(2,"0");const l=a();r(l),0===n&&(document.querySelectorAll(".time-value").forEach((e=>{e.style.borderColor="#ff4444",e.style.color="#ff4444",e.style.boxShadow="0 0 15px rgba(255, 68, 68, 0.5)",e.style.animation="urgentPulse 0.8s infinite"})),document.querySelectorAll("#daysBottom, #hoursBottom, #minutesBottom, #secondsBottom").forEach((e=>{e.style.borderColor="#ff4444",e.style.color="#ff4444",e.style.boxShadow="0 0 15px rgba(255, 68, 68, 0.5)",e.style.animation="urgentPulse 0.8s infinite"})),document.querySelector(".discount-badge").style.animation="pulse 1s infinite",document.querySelector(".discount-badge").style.borderColor="#ff4444",document.querySelector(".discount-badge").style.boxShadow="0 0 20px rgba(255, 68, 68, 0.6)")};if("loading"===document.readyState)document.addEventListener("DOMContentLoaded",(function(){c(),setInterval(c,1e3);const e=a();r(e)}));else{c(),setInterval(c,1e3);const e=a();r(e)}let l=!1;const d=document.getElementById("chatbot-toggle"),u=document.getElementById("chatbot-window"),m=document.getElementById("chatbot-close"),p=document.getElementById("chatbot-input"),h=document.getElementById("chatbot-send"),y=document.getElementById("chatbot-messages"),g=document.getElementById("typing-indicator");function f(){l=!l,l&&u&&p?(u.classList.add("show"),p.focus()):u&&u.classList.remove("show")}function v(e,t=!1){if(!y)return;const n=document.createElement("div");n.className="message "+(t?"user-message":"bot-message");const s=(new Date).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"});n.innerHTML=`\n                <div class="message-avatar">\n                    ${t?'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="avatar-icon-small"><path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>':'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="avatar-icon-small"><path d="M12 6V2H8"/><path d="M15 11v2"/><path d="M2 12h2"/><path d="M20 12h2"/><path d="M20 16a2 2 0 0 1-2 2H8.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 4 20.286V8a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2z"/><path d="M9 11v2"/></svg>'}\n                </div>\n                <div class="message-content">\n                    <div class="message-text">${e}</div>\n                    <div class="message-time">${s}</div>\n                </div>\n            `,y.appendChild(n),y.scrollTop=y.scrollHeight}function E(){g&&(g.style.display="none")}let x,q=[];async function b(e){if(e.trim()&&p){v(e,!0),q.push({role:"user",content:e}),p.value="",g&&y&&(g.style.display="flex",y.scrollTop=y.scrollHeight);try{const t=await fetch("/.netlify/functions/chatbot",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:e,conversationHistory:q.slice(-10)})});if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const n=await t.json();E(),v(n.response),q.push({role:"assistant",content:n.response}),q.length>20&&(q=q.slice(-20))}catch(e){E();const t=["D√©sol√©, je rencontre un probl√®me technique momentan√©. Pouvez-vous reposer votre question ? Notre √©quipe est l√† pour vous aider !","Excusez-moi pour ce contretemps. La formation SYST√àME VIRAL 100K‚Ñ¢ est exceptionnelle pour d√©velopper votre business. Que souhaitez-vous savoir ?","Je suis temporairement indisponible, mais notre m√©thode a fait ses preuves aupr√®s de 2800+ entrepreneurs. Avez-vous des questions sur la formation ?"];v(t[Math.floor(Math.random()*t.length)])}}}d&&d.addEventListener("click",f),m&&m.addEventListener("click",f),p&&p.addEventListener("keypress",(e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),b(p.value))})),h&&h.addEventListener("click",(()=>{p&&b(p.value)})),document.addEventListener("click",(e=>{if(l&&u&&d){const t=e.target;u.contains(t)||d.contains(t)||f()}}));class w{constructor(){this.questions=[{id:1,question:"Combien de temps peux-tu consacrer chaque jour √† ton syst√®me viral ?",options:[{text:"Moins de 30 minutes",description:"Temps limit√©",score:15},{text:"30 min √† 1h",description:"Bon d√©but",score:30},{text:"1 √† 2h",description:"Excellent rythme",score:45},{text:"Plus de 2h",description:"Investissement maximal",score:60}]},{id:2,question:"Quelle est ta motivation √† atteindre la libert√© financi√®re ?",options:[{text:"Curiosit√© ou simple envie",description:"Int√©r√™t naissant",score:20},{text:"Assez motiv√©, mais pas encore √† fond",description:"Motivation mod√©r√©e",score:40},{text:"Tr√®s motiv√©, je suis pr√™t √† m'impliquer",description:"Fort engagement",score:60},{text:"C'est une priorit√© absolue dans ma vie",description:"Engagement total",score:80}]},{id:3,question:"Quel est ton niveau de familiarit√© avec l'IA et les outils digitaux ?",options:[{text:"D√©butant complet",description:"D√©couverte √† faire",score:15},{text:"J'utilise parfois des outils IA",description:"Premi√®res exp√©riences",score:30},{text:"√Ä l'aise avec les outils digitaux",description:"Bonne ma√Ætrise",score:45},{text:"Je ma√Ætrise d√©j√† plusieurs outils IA",description:"Expert digital",score:60}]},{id:4,question:"Comment r√©agis-tu face √† l'inconfort, au risque et √† l'incertitude ?",options:[{text:"Je pr√©f√®re rester prudent",description:"Approche s√©curis√©e",score:10},{text:"Je teste parfois de nouvelles choses",description:"Ouverture progressive",score:30},{text:"Je suis pr√™t √† sortir de ma zone de confort",description:"Courage assum√©",score:50},{text:"J'avance m√™me quand j'ai peur",description:"Audace maximale",score:70}]},{id:5,question:"Comment d√©crirais-tu ta capacit√© √† rester constant sur plusieurs semaines ?",options:[{text:"J'abandonne vite si je ne vois pas de r√©sultats",description:"Besoin de r√©sultats rapides",score:10},{text:"Je tiens quelques jours, puis je rel√¢che",description:"Constance √† d√©velopper",score:25},{text:"Je suis r√©gulier la plupart du temps",description:"Bonne discipline",score:45},{text:"Je suis disciplin√©, peu importe les r√©sultats",description:"Discipline d'acier",score:65}]}],this.currentQuestionIndex=0,this.answers=[],this.totalScore=0,this.init()}init(){this.bindEvents(),this.showQuestion(0)}bindEvents(){document.getElementById("prev-btn")?.addEventListener("click",(()=>this.prevQuestion())),document.getElementById("restart-btn")?.addEventListener("click",(()=>this.restartQuiz()))}showQuestion(e){const t=document.getElementById("question-container");if(!t)return;const n=this.questions[e],s=this.answers[e],o=document.createElement("div");o.className="question-card-premium";const i=document.createElement("div");i.className="question-header-premium";const a=document.createElement("div");a.className="question-number",a.textContent=String(n.id);const r=document.createElement("div");r.className="question-content-premium";const c=document.createElement("h3");c.className="question-title-premium",c.textContent=n.question;const l=document.createElement("div");l.className="question-decoration",r.appendChild(c),r.appendChild(l),i.appendChild(a),i.appendChild(r);const d=document.createElement("div");d.className="options-grid-premium",n.options.forEach(((e,t)=>{const o=document.createElement("div");o.className="option-card-premium"+(s===t?" selected-premium":""),o.dataset.option=String(t),o.onclick=()=>this.selectOption(t);const i=document.createElement("div");i.className="option-card-inner";const a=document.createElement("div");a.className="option-visual-premium";const r=document.createElement("div");r.className="option-checkbox-premium";const c=document.createElement("input");c.type="radio",c.name=`question-${n.id}`,c.value=String(t),c.checked=s===t,c.onchange=()=>this.selectOption(t);const l=document.createElement("div");l.className="checkbox-custom";const u=document.createElement("div");u.className="checkbox-fill";const m=document.createElement("div");m.className="checkbox-check",m.textContent="‚úì",l.appendChild(u),l.appendChild(m),r.appendChild(c),r.appendChild(l),a.appendChild(r);const p=document.createElement("div");p.className="option-content-premium";const h=document.createElement("h4");h.className="option-title-premium",h.textContent=e.text;const y=document.createElement("p");y.className="option-description-premium",y.textContent=e.description;const g=document.createElement("div");g.className="option-glow-effect";const f=document.createElement("div");f.className="option-shine-effect",p.appendChild(h),p.appendChild(y),i.appendChild(a),i.appendChild(p),i.appendChild(g),i.appendChild(f),o.appendChild(i),d.appendChild(o)})),t.replaceChildren(),o.appendChild(i),o.appendChild(d),t.appendChild(o),setTimeout((()=>{t.querySelectorAll(".option-card-premium").forEach(((e,t)=>{setTimeout((()=>{e.classList.add("animate-in")}),100*t)}))}),50)}selectOption(e){this.answers[this.currentQuestionIndex]=e,document.querySelectorAll(".option-card-premium").forEach(((t,n)=>{if(n===e){t.classList.add("selected-premium");const e=t.querySelector('input[type="radio"]');e&&(e.checked=!0)}else t.classList.remove("selected-premium")})),setTimeout((()=>{this.currentQuestionIndex<this.questions.length-1?(this.currentQuestionIndex++,this.showQuestion(this.currentQuestionIndex),this.updateUI()):this.showResults()}),600)}prevQuestion(){this.currentQuestionIndex>0&&(this.currentQuestionIndex--,this.showQuestion(this.currentQuestionIndex),this.updateUI())}restartQuiz(){this.currentQuestionIndex=0,this.answers=[],this.totalScore=0;const e=document.querySelector(".calculator-content"),t=document.getElementById("results-container");e&&(e.style.display="flex"),t&&(t.style.display="none"),this.showQuestion(0),this.updateUI()}updateUI(){const e=(this.currentQuestionIndex+1)/this.questions.length*100,t=document.getElementById("progress-fill");t&&(t.style.width=`${e}%`);const n=document.getElementById("current-question"),s=document.getElementById("total-questions");n&&(n.textContent=(this.currentQuestionIndex+1).toString()),s&&(s.textContent=this.questions.length.toString());const o=document.getElementById("prev-btn");o&&(this.currentQuestionIndex>0?o.style.display="block":o.style.display="none")}calculateScore(){const e={q1:10,q2:12,q3:8,q4:6,q5:14},t={q1:[.05,.55,.85,1],q2:[.1,.5,.85,1],q3:[0,.4,.75,1],q4:[0,.45,.8,1],q5:[.05,.45,.8,1]},n={q1:this.answers[0]||0,q2:this.answers[1]||0,q3:this.answers[2]||0,q4:this.answers[3]||0,q5:this.answers[4]||0};let s=47;for(const o in e)s+=e[o]*t[o][n[o]];return s+=(e=>{let t=0;return 3===e.q2&&3===e.q5&&(t+=3),e.q1>=2&&e.q5>=2&&(t+=2),[e.q1,e.q2,e.q3,e.q4,e.q5].filter((e=>3===e)).length>=3&&(t+=2),t})(n),s>97&&(s=97),s<47&&(s=47),Math.round(s)}showResults(){const e=this.calculateScore(),t=document.querySelector(".calculator-content"),n=document.getElementById("results-container");t&&(t.style.display="none"),n&&(n.style.display="block");const s=document.getElementById("result-percentage"),o=document.getElementById("barometer-percentage"),i=document.getElementById("barometer-progress"),a=document.getElementById("result-message"),r=document.getElementById("result-recommendations");if(s&&(s.textContent=`${e}%`),o&&(o.textContent=`${e}%`),i){const t=251.2,n=t-t*e/100;setTimeout((()=>{i.style.strokeDashoffset=n.toString();const t=i.closest(".barometer-container");t&&(t.className="barometer-container",e>=85?t.classList.add("success-excellent"):e>=70?t.classList.add("success-high"):e>=50?t.classList.add("success-medium"):t.classList.add("success-low"))}),500)}let c="";c=e>=91?"üî• Succ√®s quasi certain ‚Äì Tu fais partie des profils les plus prometteurs du Syst√®me Viral 100K‚Ñ¢. Ton mindset, ta motivation et ton engagement sont exceptionnels.":e>=76?"‚ú® Tr√®s bonne probabilit√© ‚Äì Tu as les qualit√©s et la motivation d'un futur cr√©ateur √† succ√®s. Le Syst√®me Viral est fait pour toi.":e>=51?"üíö Bonne probabilit√© ‚Äì Tu as d√©j√† les bases pour r√©ussir, il te suffit du bon syst√®me pour transformer ton potentiel en r√©sultats concrets.":"üí° Probabilit√© faible ‚Äì Le syst√®me viral peut t'aider √† construire la discipline et la clart√© n√©cessaires pour te lancer et progresser.",a&&(a.textContent=c),this.generatePersonalizedRecommendations(e,r)}async generatePersonalizedRecommendations(e,t){try{t&&(t.innerHTML='\n                            <h4>Recommandations personnalis√©es</h4>\n                            <div style="text-align: center; padding: 20px;">\n                                <div style="color: var(--accent);">ü§ñ G√©n√©ration de recommandations personnalis√©es...</div>\n                            </div>\n                        ');const n=await fetch("/.netlify/functions/personalized-recommendations",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({answers:this.answers,score:e,userProfile:{temps:this.answers[0]||0,motivation:this.answers[1]||0,competences:this.answers[2]||0,audace:this.answers[3]||0,perseverance:this.answers[4]||0}})});if(!n.ok)throw new Error("Erreur API recommandations");const s=(await n.json()).recommendation||"";if(t&&s){const e=`\n                            <h4>Recommandation personnalis√©e</h4>\n                            <p style="color: var(--text-secondary); line-height: 1.6; font-size: 16px; margin: 0;">\n                                ${s}\n                            </p>\n                        `;t.innerHTML=e}}catch(e){if(t){const e='\n                            <h4>Recommandation personnalis√©e</h4>\n                            <p style="color: var(--text-secondary); line-height: 1.6; font-size: 16px; margin: 0;">\n                                Bas√© sur ton profil, tu as un potentiel r√©el pour r√©ussir avec le Syst√®me Viral 100K‚Ñ¢. Ta motivation et ton engagement sont tes plus grands atouts. La formation te donnera la m√©thode et les outils pour transformer ce potentiel en r√©sultats concrets et durables.\n                            </p>\n                        ';t.innerHTML=e}}}restart(){this.currentQuestionIndex=0,this.answers=[],this.totalScore=0;const e=document.querySelector(".calculator-content"),t=document.getElementById("results-container");e&&(e.style.display="flex"),t&&(t.style.display="none"),this.showQuestion(0)}}function S(){x=new w,window.calculator=x;const e=document.getElementById("question-container");e&&new MutationObserver((()=>{e.querySelector(".question-card-premium")||window.calculator&&"function"==typeof window.calculator.showQuestion&&window.calculator.showQuestion(window.calculator.currentQuestionIndex||0)})).observe(e,{childList:!0,subtree:!0})}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",S):S();const I=()=>{const e=document.querySelectorAll(".timeline-step"),t=new IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting&&e.target.classList.add("active")}))}),{threshold:.3});e.forEach((e=>{t.observe(e)}));const n=document.querySelector(".roadmap-section"),s=document.querySelector(".timeline-line");if(n&&s&&e.length>0){const e=()=>{const e=n.getBoundingClientRect(),t=window.innerHeight,o=e.top,i=e.height;let a=0;if(o<t&&o>-i){const e=Math.max(0,Math.min(1,(t-o)/(t+i)));if(e>.5){const t=.5+1.5*(e-.5);a=Math.min(1,t)}else a=e}s.style.height=100*a+"%"};window.addEventListener("scroll",e),e();const t=document.querySelector(".roadmap-timeline"),o=Array.from(document.querySelectorAll(".timeline-step"));if(t&&o.length){t.querySelectorAll(".timeline-stop").forEach((e=>e.remove()));const e=t.getBoundingClientRect().width/2;o.forEach((n=>{const s=n.getBoundingClientRect(),o=n.offsetTop+s.height/2,i=document.createElement("div");i.className="timeline-stop",i.style.left=`${e}px`,i.style.top=`${o}px`,t.appendChild(i)}))}}};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",I):I(),document.addEventListener("DOMContentLoaded",(function(){const e=document.querySelector(".play-button"),t=document.querySelector(".case-study-video"),n=document.querySelector(".image-overlay");e&&t&&n&&(e.addEventListener("click",(function(){t.play(),t.controls=!0,n.style.opacity="0",n.style.pointerEvents="none"})),t.addEventListener("click",(function(e){e.target===t&&(t.paused?(t.play(),t.controls=!0):t.pause())})),t.addEventListener("play",(function(){n.style.opacity="0",n.style.pointerEvents="none"})),t.addEventListener("pause",(function(){n.style.opacity="1",n.style.pointerEvents="auto"})))})),document.addEventListener("DOMContentLoaded",(function(){const e=document.querySelectorAll(".faq-item");e.forEach((t=>{const n=t.querySelector(".faq-question"),s=t.querySelector(".faq-answer"),o=t.querySelector(".faq-icon");n.addEventListener("click",(function(){const n="block"===s.style.display;e.forEach((e=>{const t=e.querySelector(".faq-answer"),n=e.querySelector(".faq-icon");t.style.display="none",n.style.transform="rotate(0deg)",e.style.background="rgba(255, 255, 255, 0.02)"})),n||(s.style.display="block",o.style.transform="rotate(180deg)",t.style.background="rgba(1, 233, 136, 0.05)")}))}))}));